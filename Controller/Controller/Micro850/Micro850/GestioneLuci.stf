PROGRAM GestioneLuci
#info= QLD
BOF


(*Chiamata della funzione di lettura dei pulsanti*)

SOR  [0,1] (**) (**)  FB  [1,0] (*fcLetturaPulsanti*) (*1*) ( (*EN:EN*)(**) (**) ; (*ENO:ENO*)(**) (**)  , (*fcLetturaPulsanti:*)(*xTempBool*) (**) )
EOR [4,0]


(*Chiamata alla funzione di lettura dei comandi da Modbus*)

SOR  [0,4] (**) (**)  FB  [1,0] (*fcLetturaCmdModbus*) (*21*) ( (*EN:EN*)(**) (**) ; (*fcLetturaCmdModbus:*)(**) (**) )
EOR [4,0]


(*Abilitazione modalità automatica luci in funzione dell'orario*)

SOR  [0,6] (**) (**)  
 BST  FB  [1,0] (*>=*) (*3*) ( (*EN:EN*)(**) (**)  , (*i1:*)(*i_stData.diOra*) (**)  , (*i2:*)(*18*) (**) ; (*o1:*)(**) (**) )
   NXB  FB  [1,3] (*<=*) (*4*) ( (*EN:EN*)(**) (**)  , (*i1:*)(*i_stData.diOra*) (**)  , (*i2:*)(*7*) (**) ; (*o1:*)(**) (**) )
 BND
  
 BST  FB  [4,0] (*1 gain*) (*5*) ( (*EN:EN*)(**) (**)  , (*i1:*)(*2*) (**) ; (*ENO:ENO*)(**) (**)  , (*o1:*)(*i_stLuceVerandaHmiCmds.iModeSel*) (**) )
   NXB  
 BST  FB  [4,2] (*1 gain*) (*5*) ( (*EN:EN*)(**) (**)  , (*i1:*)(*2*) (**) ; (*ENO:ENO*)(**) (**)  , (*o1:*)(*i_stLuceIngressoHmiCmds.iModeSel*) (**) )
   NXB  
 BST  FB  [4,4] (*1 gain*) (*6*) ( (*EN:EN*)(**) (**)  , (*i1:*)(*15*) (**) ; (*ENO:ENO*)(**) (**)  , (*o1:*)(*i_stLuceVerandaHmiCmds.diAutoTime*) (**) )
   NXB  FB  [4,6] (*1 gain*) (*7*) ( (*EN:EN*)(**) (**)  , (*i1:*)(*60*) (**) ; (*ENO:ENO*)(**) (**)  , (*o1:*)(*i_stLuceIngressoHmiCmds.diAutoTime*) (**) )
 BND

 BND

 BND

EOR [7,0]


(*Abilitazione modalità manuale luci in funzione dell'orario*)

SOR  [0,15] (**) (**)  
 BST  FB  [1,0] (*>*) (*8*) ( (*EN:EN*)(**) (**)  , (*i1:*)(*i_stData.diOra*) (**)  , (*i2:*)(*7*) (**) ; (*o1:*)(**) (**) )  FB  [4,0] (*<*) (*9*) ( (*EN:EN*)(**) (**)  , (*i1:*)(*i_stData.diOra*) (**)  , (*i2:*)(*18*) (**) ; (*o1:*)(**) (**) )
   NXB  XIO  [1,3] (*o_stSystemVar.xHmiConOk*) (**)
 BND
  
 BST  FB  [7,0] (*1 gain*) (*10*) ( (*EN:EN*)(**) (**)  , (*i1:*)(*0*) (**) ; (*ENO:ENO*)(**) (**)  , (*o1:*)(*i_stLuceVerandaHmiCmds.iModeSel*) (**) )
   NXB  FB  [7,2] (*1 gain*) (*11*) ( (*EN:EN*)(**) (**)  , (*i1:*)(*0*) (**) ; (*ENO:ENO*)(**) (**)  , (*o1:*)(*i_stLuceIngressoHmiCmds.iModeSel*) (**) )
 BND

EOR [10,0]


(*Abilitazione / disabilitazione luci di Natale*)

SOR  [0,20] (**) (**)  XIC  [1,0] (*o_stSystemVar.xHmiConOk*) (**)  
 BST  FB  [2,0] (*=*) (*12*) ( (*EN:EN*)(**) (**)  , (*i1:*)(*i_stData.diMese*) (**)  , (*i2:*)(*12*) (**) ; (*o1:*)(**) (**) )  FB  [5,0] (*>=*) (*13*) ( (*EN:EN*)(**) (**)  , (*i1:*)(*i_stData.diGiorno*) (**)  , (*i2:*)(*8*) (**) ; (*o1:*)(**) (**) )
   NXB  FB  [2,3] (*=*) (*14*) ( (*EN:EN*)(**) (**)  , (*i1:*)(*i_stData.diMese*) (**)  , (*i2:*)(*1*) (**) ; (*o1:*)(**) (**) )  FB  [5,3] (*<=*) (*15*) ( (*EN:EN*)(**) (**)  , (*i1:*)(*i_stData.diGiorno*) (**)  , (*i2:*)(*6*) (**) ; (*o1:*)(**) (**) )
 BND
  
 BST  FB  [8,0] (*>=*) (*18*) ( (*EN:EN*)(**) (**)  , (*i1:*)(*i_stData.diOra*) (**)  , (*i2:*)(*17*) (**) ; (*o1:*)(**) (**) )
   NXB  FB  [8,3] (*<=*) (*19*) ( (*EN:EN*)(**) (**)  , (*i1:*)(*i_stData.diOra*) (**)  , (*i2:*)(*6*) (**) ; (*o1:*)(**) (**) )
 BND
  OTE  [11,0] (*xChristmasLight*) (**)
EOR [12,0]


(*Gestione LUCE VERANDA*)

SOR  [0,27] (**) (**)  FB  [1,0] (*fbPuntoLuce*) (*fbLuceVeranda*) ( (*EN:EN*)(**) (**)  , (*i_xManCmd:*)(*i_stPulsanti.pulLuceVeranda*) (**)  , (*i_xAutCmd:*)(*xFilteredSensAntif.xPresVeranda*) (**)  , (*stHmiPlCmd:*)(*i_stLuceVerandaHmiCmds*) (**)  , (*i_xMbManCmd:*)(*MbIn_xPbVeranda*) (**) ; (*ENO:ENO*)(**) (**)  , (*o_xLampCmd:*)(*o_stComandiLuci.cmdLuceVeranda*) (**)  , (*stHmiPlFdbk:*)(*o_stLuceVerandaFdbk*) (**)  , (*o_xRiscCmd:*)(**) (**) )
EOR [4,0]


(*Gestione LUCE CUCINA*)

SOR  [0,33] (**) (**)  FB  [1,0] (*fbPuntoLuce*) (*fbLuceCucina*) ( (*EN:EN*)(**) (**)  , (*i_xManCmd:*)(*i_stPulsanti.pulLuceCucina*) (**)  , (*i_xAutCmd:*)(*xFilteredSensAntif.xPresCucina*) (**)  , (*stHmiPlCmd:*)(*i_stLuceCucinaHmiCmds*) (**)  , (*i_xMbManCmd:*)(*MbIn_xPbCucina*) (**) ; (*ENO:ENO*)(**) (**)  , (*o_xLampCmd:*)(*o_stComandiLuci.cmdLuceCucina*) (**)  , (*stHmiPlFdbk:*)(*o_stLuceCucinaFdbk*) (**)  , (*o_xRiscCmd:*)(**) (**) )
EOR [4,0]


(*Gestione LUCE ANTIBAGNO*)

SOR  [0,39] (**) (**)  FB  [1,0] (*fbPuntoLuce*) (*fbLuceAntibagno*) ( (*EN:EN*)(**) (**)  , (*i_xManCmd:*)(*i_stPulsanti.pulLuceAntibagno*) (**)  , (*i_xAutCmd:*)(*xFilteredSensAntif.xPresAntiBagno*) (**)  , (*stHmiPlCmd:*)(*i_stLuceAntibagnoHmiCmds*) (**)  , (*i_xMbManCmd:*)(*MbIn_xPbAntibagno*) (**) ; (*ENO:ENO*)(**) (**)  , (*o_xLampCmd:*)(*o_stComandiLuci.cmdLuceAntibagno*) (**)  , (*stHmiPlFdbk:*)(*o_stLuceAntibagnoFdbk*) (**)  , (*o_xRiscCmd:*)(**) (**) )
EOR [4,0]


(*Gestione LUCE SALA LIBRERIA*)

SOR  [0,45] (**) (**)  FB  [1,0] (*fbPuntoLuce*) (*fbLuceSalaLibreria*) ( (*EN:EN*)(**) (**)  , (*i_xManCmd:*)(*i_stPulsanti.pulLuceSalaLibreria*) (**)  , (*i_xAutCmd:*)(*xFilteredSensAntif.xPreSalaLibreria*) (**)  , (*stHmiPlCmd:*)(*i_stLuceSalaLibreriaHmiCmds*) (**)  , (*i_xMbManCmd:*)(*MbIn_xPbSalaLib*) (**) ; (*ENO:ENO*)(**) (**)  , (*o_xLampCmd:*)(*o_stComandiLuci.cmdLuceSalaLibreria*) (**)  , (*stHmiPlFdbk:*)(*o_stLuceSalaLibreriaFdbk*) (**)  , (*o_xRiscCmd:*)(**) (**) )
EOR [4,0]


(*Gestione LUCE CAMERA LETTO*)

SOR  [0,51] (**) (**)  FB  [1,0] (*fbPuntoLuce*) (*fbLuceCameraLetto*) ( (*EN:EN*)(**) (**)  , (*i_xManCmd:*)(*i_stPulsanti.pulLuceCameraLetto*) (**)  , (*i_xAutCmd:*)(*xFilteredSensAntif.xPresLetto*) (**)  , (*stHmiPlCmd:*)(*i_stLuceCameraLettoHmiCmds*) (**)  , (*i_xMbManCmd:*)(*MbIn_xPbLetto*) (**) ; (*ENO:ENO*)(**) (**)  , (*o_xLampCmd:*)(*o_stComandiLuci.cmdLuceCameraLetto*) (**)  , (*stHmiPlFdbk:*)(*o_stLuceCameraLettoFdbk*) (**)  , (*o_xRiscCmd:*)(**) (**) )
EOR [4,0]


(*Gestione LUCE CORRIDOIO*)

SOR  [0,57] (**) (**)  FB  [1,0] (*fbPuntoLuce*) (*fbLuceCorridoio*) ( (*EN:EN*)(**) (**)  , (*i_xManCmd:*)(*i_stPulsanti.pulLuceCorridoio*) (**)  , (*i_xAutCmd:*)(*xFilteredSensAntif.xPresCorridoio*) (**)  , (*stHmiPlCmd:*)(*i_stLuceCorridoioHmiCmds*) (**)  , (*i_xMbManCmd:*)(*MbIn_xPbCorr*) (**) ; (*ENO:ENO*)(**) (**)  , (*o_xLampCmd:*)(*o_stComandiLuci.cmdLuceCorridoio*) (**)  , (*stHmiPlFdbk:*)(*o_stLuceCorridoioFdbk*) (**)  , (*o_xRiscCmd:*)(**) (**) )
EOR [4,0]


(*Gestione LUCE SALA*)

SOR  [0,63] (**) (**)  FB  [1,0] (*fbPuntoLuce*) (*fbLuceSala*) ( (*EN:EN*)(**) (**)  , (*i_xManCmd:*)(*i_stPulsanti.pulLuceSala*) (**)  , (*i_xAutCmd:*)(*xFilteredSensAntif.xPresSala*) (**)  , (*stHmiPlCmd:*)(*i_stLuceSalaHmiCmds*) (**)  , (*i_xMbManCmd:*)(*MbIn_xPbSala*) (**) ; (*ENO:ENO*)(**) (**)  , (*o_xLampCmd:*)(*o_stComandiLuci.cmdLuceSala*) (**)  , (*stHmiPlFdbk:*)(*o_stLuceSalaFdbk*) (**)  , (*o_xRiscCmd:*)(**) (**) )
EOR [4,0]


(*Gestione LUCE INGRESSO*)

SOR  [0,69] (**) (**)  FB  [1,0] (*fbPuntoLuce*) (*fbLuceIngresso*) ( (*EN:EN*)(**) (**)  , (*i_xManCmd:*)(*i_stPulsanti.pulLuceIngresso*) (**)  , (*i_xAutCmd:*)(*xFilteredSensAntif.xPresIngresso*) (**)  , (*stHmiPlCmd:*)(*i_stLuceIngressoHmiCmds*) (**)  , (*i_xMbManCmd:*)(*MbIn_xPbIngr*) (**) ; (*ENO:ENO*)(**) (**)  , (*o_xLampCmd:*)(*o_stComandiLuci.cmdLuceIngresso*) (**)  , (*stHmiPlFdbk:*)(*o_stLuceIngressoFdbk*) (**)  , (*o_xRiscCmd:*)(**) (**) )
EOR [4,0]


(*Gestione LUCE BAGNO*)

SOR  [0,75] (**) (**)  FB  [1,0] (*fbPuntoLuce*) (*fbLuceBagno*) ( (*EN:EN*)(**) (**)  , (*i_xManCmd:*)(*i_stPulsanti.pulLuceBagno*) (**)  , (*i_xAutCmd:*)(*xFilteredSensAntif.xPresBagno*) (**)  , (*stHmiPlCmd:*)(*i_stLuceBagnoHmiCmds*) (**)  , (*i_xMbManCmd:*)(*MbIn_xPbBagno*) (**) ; (*ENO:ENO*)(**) (**)  , (*o_xLampCmd:*)(*o_stComandiLuci.cmdLuceBagno*) (**)  , (*stHmiPlFdbk:*)(*o_stLuceBagnoFdbk*) (**)  , (*o_xRiscCmd:*)(**) (**) )
EOR [4,0]


(*Gestione LUCE FUORI DAVANTI*)

SOR  [0,81] (**) (**)  FB  [1,0] (*fbPuntoLuce*) (*fbLuceFuoriDavanti*) ( (*EN:EN*)(**) (**)  , (*i_xManCmd:*)(*i_stPulsanti.pulLuceFuoriDavanti*) (**)  , (*i_xAutCmd:*)(*xChristmasLight*) (**)  , (*stHmiPlCmd:*)(*i_stLuceFuoriDavantiHmiCmds*) (**)  , (*i_xMbManCmd:*)(*MbIn_xPbFuoriDav*) (**) ; (*ENO:ENO*)(**) (**)  , (*o_xLampCmd:*)(*o_stComandiLuci.cmdLuceFuoriDavanti*) (**)  , (*stHmiPlFdbk:*)(*o_stLuceFuoriDavantiFdbk*) (**)  , (*o_xRiscCmd:*)(**) (**) )
EOR [4,0]


(*Gestione LUCE CANTINA*)

SOR  [0,87] (**) (**)  FB  [1,0] (*fbPuntoLuce*) (*fbLuceCantina*) ( (*EN:EN*)(**) (**)  , (*i_xManCmd:*)(*i_stPulsanti.pulLuceCantina*) (**)  , (*i_xAutCmd:*)(**) (**)  , (*stHmiPlCmd:*)(*i_stLuceCantinaHmiCmds*) (**)  , (*i_xMbManCmd:*)(*MbIn_xPbCantina*) (**) ; (*ENO:ENO*)(**) (**)  , (*o_xLampCmd:*)(*o_stComandiLuci.cmdLuceCantina*) (**)  , (*stHmiPlFdbk:*)(*o_stLuceCantinaFdbk*) (**)  , (*o_xRiscCmd:*)(**) (**) )
EOR [4,0]


(*Comando riscaldamento Zona A -- Zona Notte*)

SOR  [0,93] (**) (**)  
 BST  XIC  [1,0] (*fbLuceSalaLibreria.o_xRiscCmd*) (**)
   NXB  
 BST  XIC  [1,1] (*fbLuceCameraLetto.o_xRiscCmd*) (**)
   NXB  XIC  [1,2] (*fbLuceIngresso.o_xRiscCmd*) (**)
 BND

 BND
  OTE  [2,0] (*i_stZonaAManCmd.xPulsCmd*) (**)
EOR [3,0]


(*Comando riscaldamento Zona B -- Zona Bagno*)

SOR  [0,97] (**) (**)  
 BST  XIC  [1,0] (*fbLuceAntibagno.o_xRiscCmd*) (**)
   NXB  XIC  [1,1] (*fbLuceBagno.o_xRiscCmd*) (**)
 BND
  OTE  [2,0] (*i_stZonaBManCmd.xPulsCmd*) (**)
EOR [3,0]


(*Comando riscaldamento Zona C -- Zona Giorno*)

SOR  [0,100] (**) (**)  
 BST  XIC  [1,0] (*fbLuceVeranda.o_xRiscCmd*) (**)
   NXB  
 BST  XIC  [1,1] (*fbLuceCucina.o_xRiscCmd*) (**)
   NXB  
 BST  XIC  [1,2] (*fbLuceCorridoio.o_xRiscCmd*) (**)
   NXB  XIC  [1,3] (*fbLuceSala.o_xRiscCmd*) (**)
 BND

 BND

 BND
  OTE  [2,0] (*i_stZonaCManCmd.xPulsCmd*) (**)
EOR [3,0]


(*Chiamata alla funzione di scrittura delle uscite per il comando delle luci*)

SOR  [0,105] (**) (**)  FB  [1,0] (*fcScritturaLuci*) (*2*) ( (*EN:EN*)(**) (**) ; (*ENO:ENO*)(**) (**)  , (*fcScritturaLuci:*)(*xTempBool*) (**) )
EOR [4,0]


(*Chiamta alla funzione di lettura degli stati delle luci*)

SOR  [0,108] (**) (**)  FB  [1,0] (*fcLetturaStatiLuci*) (*22*) ( (*EN:EN*)(**) (**) ; (*fcLetturaStatiLuci:*)(**) (**) )
EOR [4,0]
EOF
#end_info
#info= ID_MAX
NextId=22
#end_info
END_PROGRAM